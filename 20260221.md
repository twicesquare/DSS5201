# 20260221

## sns的色彩相关
![](https://cdn.jsdelivr.net/gh/twicesquare/pics@main/20260221102002794.png)
![](https://cdn.jsdelivr.net/gh/twicesquare/pics@main/20260221102105686.png)
```
# Change the legend order in the scatter plot
sns.scatterplot(x="absences", y="G3", 
                data=student_data, 
                hue="location",
                hue_order=["Rural", "Urban"])
```

## 关系图 relplot
![](https://cdn.jsdelivr.net/gh/twicesquare/pics@main/20260221103529303.png)

### col_wrap指定每行几张图
![](https://cdn.jsdelivr.net/gh/twicesquare/pics@main/20260221103614727.png)

### 各项参数
| 参数 | 作用 | 常见取值 |
| :--- | :--- | :--- |
| style | 改变点的形状或线的虚实 | 传入分类列名，如 style="smoker" |
| size | 改变点的大小或线的粗细 | 传入数值列名，实现气泡图效果 |
| alpha | 设置透明度 | 0 到 1 之间的浮点数 |
| markers | 是否显示数据点标记 | True 或 False |
| kind | 切换底层绘图类型 | 在 catplot 中可选 "box", "violin", "bar" 等 |

### 线图
```
# Add markers and make each line have the same style
sns.relplot(x="model_year", y="horsepower",
            data=mpg, kind="line",
            errorbar=None, style="origin",
            hue="origin",
            markers=True,
            dashes=False)
```
`markers`保持标记不变

`dashes`设为false表示都用实线

## catplot，类关系图
| 特性 | relplot (Relational) | catplot (Categorical) |
| :--- | :--- | :--- |
| 主要目的 | 探索两个数值变量之间的关系。 | 探索分类变量与数值变量之间的关系。 |
| 默认类型 | 散点图 (kind="scatter") | 柱状图/条形图 (kind="strip") |
| 典型 x 轴 | 连续数值（如时间、身高、价格） | 离散类别（如地区、学期、颜色） |


优势主要在于可以使用col之类的组织，比如如果是单独的boxplot()就不可以

### boxplot，"box"参数
#### whis 的常见设置方式

① 数值倍数 (默认值 whis=1.5)  
这是最标准的设置。胡须的长度等于 1.5 * IQR（IQR 为四分位距，即 Q3 - Q1）。超过这个范围的点会被画成散点（离群点）。如果你想让判定标准更严格，可以调大数值，如 whis=3.0。

② 百分比序列 [low, high]  
你可以传入一个包含两个数值的列表，明确指定胡须延伸到数据的具体分位数。例如：whis=[5, 95]。含义：胡须将从第 5 个百分位数延伸到第 95 个百分位数。这在处理存在极端极端值的金融或气象数据时非常有用，可以强行忽略最极端的 5%。

③ 覆盖全距 whis=np.inf (或极大值)  
如果你不想看到任何离群点，希望胡须延伸到数据的最小值和最大值。设置为 np.inf。效果：所有的点都会被包裹在胡须之内，不再有单独的离群点显示。

#### `showfliers`
showfliers=True (默认值)：图表中会显示离群点。就像你刚才看到的那张图，下方的那些小圆圈（0分值）会被画出来。

showfliers=False：图表中将隐藏所有的离群点。胡须（Whiskers）的长度和箱体的位置保持不变，但那些“掉”在胡须之外的点将不再可见。

### point plot
```
import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np

sns.catplot(
    # --- 基础维度参数 ---
    data=student_data,      # 数据集 (DataFrame)
    kind="point",           # 指定图表类型为点图
    x="study_time",         # 横轴：分类变量
    y="G3",                 # 纵轴：数值变量
    hue="location",         # 分组变量：根据此列区分不同颜色的线条

    # --- 统计逻辑控制 ---
    estimator=np.mean,      # 估计函数：默认算平均值，可改为 np.median (中位数)
    ci=95,                  # 置信区间：默认 95%。设为 None 关闭，或设为 "sd" 显示标准差
    n_boot=1000,            # 计算置信区间时的自助采样 (bootstrap) 次数
    
    # --- 点与线的样式控制 ---
    join=True,              # 是否用线连接各组的点 (默认 True)
    scale=1,                # 整体缩放：调节点的大小和线条的粗细
    markers=["o", "s"],     # 点的形状：如 "o" (圆)、"s" (方)。有 hue 时可传列表
    linestyles=["-", "--"], # 线条样式：实线 "-", 虚线 "--" 等
    color="steelblue",      # 当没有 hue 时，统一指定所有元素的颜色
    palette="Set1",         # 调色板名称：用于 hue 分组时的颜色映射
    
    # --- 误差棒 (Error Bar) 细节 ---
    capsize=0.1,            # 误差棒末端横线的宽度 (默认没有横线，建议设为 0.1-0.2)
    errwidth=1.5,           # 误差棒线条的粗细
    
    # --- 布局与多图 (FacetGrid) 参数 ---
    dodge=True,             # 多个 hue 分组时，点是否稍微左右错开 (防止重叠，推荐 True)
    col="sex",              # 水平分面：根据“性别”把图拆成左右两张子图
    row="famsize",          # 垂直分面：根据“家庭规模”把图拆成上下两张子图
    col_wrap=None,          # 自动换行：当 col 指定的列有很多分类时，限制每行显示几个子图
    order=["<2 hours", "2 to 5 hours"], # 手动指定 X 轴分类出现的顺序
    hue_order=["Urban", "Rural"],       # 手动指定图例中分组出现的顺序
    
    # --- 外观修饰 ---
    height=5,               # 每个子图的高度 (英寸)
    aspect=1,               # 每个子图的宽高比 (width = height * aspect)
)

```

## sns.set_style
## sns.set_palette
可以运行 `sns.palplot(sns.color_palette("模板名"))` 来预览这些颜色

## 标题和坐标轴
### title
```
g=sns.catplot()
g.figure.suptitle("name", 
                  y=1.03 #调节标题高度，1.03就是比原位置高0.03)
```
```
# Identify plot type
type_of_g = type(g)
```

### 坐标轴
`g.set(xlabel="xxx", ylabel="yyy")`

`plt.xticks(rotation=90)`
